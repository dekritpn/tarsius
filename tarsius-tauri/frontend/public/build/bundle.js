var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function l(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e,n){const o=e.toLowerCase();o in t?t[o]="boolean"==typeof t[o]&&""===n||n:e in t?t[e]="boolean"==typeof t[e]&&""===n||n:m(t,e,n)}function y(t,e){e=""+e,t.data!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function w(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}let $,j;function k(){if(void 0===$){$=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){$=!0}}return $}function x(t,e,n){t.classList.toggle(e,!!n)}function O(t){j=t}function _(){if(!j)throw new Error("Function called outside component initialization");return j}function C(t){_().$$.on_mount.push(t)}function P(){const t=_();return(e,n,{cancelable:o=!1}={})=>{const r=t.$$.callbacks[e];if(r){const c=function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}(e,n,{cancelable:o});return r.slice().forEach(e=>{e.call(t,c)}),!c.defaultPrevented}return!0}}const S=[],D=[];let E=[];const T=[],L=Promise.resolve();let I=!1;function A(){I||(I=!0,L.then(H))}function N(){return A(),L}function q(t){E.push(t)}function M(t){T.push(t)}const R=new Set;let z=0;function H(){if(0!==z)return;const t=j;do{try{for(;z<S.length;){const t=S[z];z++,O(t),U(t.$$)}}catch(t){throw S.length=0,z=0,t}for(O(null),S.length=0,z=0;D.length;)D.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];R.has(e)||(R.add(e),e())}E.length=0}while(S.length);for(;T.length;)T.pop()();I=!1,R.clear(),O(t)}function U(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const B=new Set;let W;function F(){W={r:0,c:[],p:W}}function V(){W.r||o(W.c),W=W.p}function X(t,e){t&&t.i&&(B.delete(t),t.i(e))}function J(t,e,n,o){if(t&&t.o){if(B.has(t))return;B.add(t),W.c.push(()=>{B.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function Y(t){return void 0!==t?.length?t:Array.from(t)}function G(t,e){J(t,1,1,()=>{e.delete(t.key)})}function K(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function Q(t){t&&t.c()}function Z(t,n,c){const{fragment:i,after_update:l}=t.$$;i&&i.m(n,c),q(()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(q)}function tt(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];E.forEach(o=>-1===t.indexOf(o)?e.push(o):n.push(o)),n.forEach(t=>t()),E=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function et(e,r,c,i,l,s,u=null,f=[-1]){const d=j;O(e);const h=e.$$={fragment:null,ctx:[],props:s,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:r.target||d.$$.root};u&&u(h.root);let p=!1;if(h.ctx=c?c(e,r.props||{},(t,n,...o)=>{const r=o.length?o[0]:n;return h.ctx&&l(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),p&&function(t,e){-1===t.$$.dirty[0]&&(S.push(t),A(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],h.update(),p=!0,o(h.before_update),h.fragment=!!i&&i(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(a)}else h.fragment&&h.fragment.c();r.intro&&X(e.$$.fragment),Z(e,r.target,r.anchor),H()}O(d)}class nt{$$=void 0;$$set=void 0;$destroy(){tt(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ot(t,e=!1){const n=window.crypto.getRandomValues(new Uint32Array(1))[0],o=`_${n}`;return Object.defineProperty(window,o,{value:n=>(e&&Reflect.deleteProperty(window,o),null==t?void 0:t(n)),writable:!1,configurable:!0}),n}async function rt(t,e={}){return new Promise((n,o)=>{const r=ot(t=>{n(t),Reflect.deleteProperty(window,`_${c}`)},!0),c=ot(t=>{o(t),Reflect.deleteProperty(window,`_${r}`)},!0);window.__TAURI_IPC__({cmd:t,callback:r,error:c,...e})})}function ct(t,e,n){const o=t.slice();return o[23]=e[n],o}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const it=t=>({item:16&t}),lt=t=>({item:t[23].data});function st(t,e){let n,o,r;const c=e[14].default,u=function(t,e,n,o){if(t){const r=i(t,e,n,o);return t[0](r)}}(c,e,e[13],lt),p=u||function(){let t;return{c(){t=d("Missing template")},m(e,n){s(e,t,n)},d(e){e&&a(t)}}}();return{key:t,first:null,c(){n=f("svelte-virtual-list-row"),p&&p.c(),o=h(),v(n,"class","svelte-1tqh76q"),this.first=n},m(t,e){s(t,n,e),p&&p.m(n,null),l(n,o),r=!0},p(t,n){e=t,u&&u.p&&(!r||8208&n)&&function(t,e,n,o,r,c){if(r){const l=i(e,n,o,c);t.p(l,r)}}(u,c,e,e[13],r?function(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}(c,e[13],n,it):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(e[13]),lt)},i(t){r||(X(p,t),r=!0)},o(t){J(p,t),r=!1},d(t){t&&a(n),p&&p.d(t)}}}function at(t){let e,n,r,c,i,u,d=[],h=new Map,g=Y(t[4]);const m=t=>t[23].index;for(let e=0;e<g.length;e+=1){let n=ct(t,g,e),o=m(n);h.set(o,d[e]=st(o,n))}return{c(){e=f("svelte-virtual-list-viewport"),n=f("svelte-virtual-list-contents");for(let t=0;t<d.length;t+=1)d[t].c();w(n,"padding-top",t[5]+"px"),w(n,"padding-bottom",t[6]+"px"),v(n,"class","svelte-1tqh76q"),w(e,"height",t[0]),v(e,"class","svelte-1tqh76q"),q(()=>t[17].call(e))},m(o,h){s(o,e,h),l(e,n);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(n,null);t[15](n),t[16](e),r=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=f("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=k();let r;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=p(window,"message",t=>{t.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{r=p(n.contentWindow,"resize",e),e()}),l(t,n),()=>{(o||r&&n.contentWindow)&&r(),a(n)}}(e,t[17].bind(e)),c=!0,i||(u=p(e,"scroll",t[7]),i=!0)},p(t,[r]){8208&r&&(g=Y(t[4]),F(),d=function(t,e,n,r,c,i,l,s,a,u,f,d){let h=t.length,p=i.length,g=h;const m={};for(;g--;)m[t[g].key]=g;const v=[],y=new Map,b=new Map,w=[];for(g=p;g--;){const t=d(c,i,g),o=n(t);let s=l.get(o);s?r&&w.push(()=>s.p(t,e)):(s=u(o,t),s.c()),y.set(o,v[g]=s),o in m&&b.set(o,Math.abs(g-m[o]))}const $=new Set,j=new Set;function k(t){X(t,1),t.m(s,f),l.set(t.key,t),f=t.first,p--}for(;h&&p;){const e=v[p-1],n=t[h-1],o=e.key,r=n.key;e===n?(f=e.first,h--,p--):y.has(r)?!l.has(o)||$.has(o)?k(e):j.has(r)?h--:b.get(o)>b.get(r)?(j.add(o),k(e)):($.add(r),h--):(a(n,l),h--)}for(;h--;){const e=t[h];y.has(e.key)||a(e,l)}for(;p;)k(v[p-1]);return o(w),v}(d,r,m,1,t,g,h,n,G,st,null,ct),V()),(!c||32&r)&&w(n,"padding-top",t[5]+"px"),(!c||64&r)&&w(n,"padding-bottom",t[6]+"px"),(!c||1&r)&&w(e,"height",t[0])},i(t){if(!c){for(let t=0;t<g.length;t+=1)X(d[t]);c=!0}},o(t){for(let t=0;t<d.length;t+=1)J(d[t]);c=!1},d(n){n&&a(e);for(let t=0;t<d.length;t+=1)d[t].d();t[15](null),t[16](null),r(),i=!1,u()}}}function ut(t,e,n){let o,r,c,i,l,s,{$$slots:a={},$$scope:u}=e,{items:f}=e,{height:d="100%"}=e,{itemHeight:h}=e,{start:p=0}=e,{end:g=0}=e,m=[],v=0,y=0,b=0;return C(()=>{o=c.getElementsByTagName("svelte-virtual-list-row"),n(12,l=!0)}),t.$$set=t=>{"items"in t&&n(10,f=t.items),"height"in t&&n(0,d=t.height),"itemHeight"in t&&n(11,h=t.itemHeight),"start"in t&&n(8,p=t.start),"end"in t&&n(9,g=t.end),"$$scope"in t&&n(13,u=t.$$scope)},t.$$.update=()=>{1792&t.$$.dirty&&n(4,i=f.slice(p,g).map((t,e)=>({index:e+p,data:t}))),7170&t.$$.dirty&&l&&async function(t,e,c){const{scrollTop:i}=r;await N();let l=y-i,a=p;for(;l<e&&a<t.length;){let t=o[a-p];t||(n(9,g=a+1),await N(),t=o[a-p]),l+=m[a]=c||t.offsetHeight,a+=1}n(9,g=a);const u=t.length-g;s=(y+l)/g,n(6,b=u*s),m.length=t.length}(f,v,h)},[d,v,r,c,i,y,b,async function(){const{scrollTop:t}=r,e=p;for(let t=0;t<o.length;t+=1)m[p+t]=h||o[t].offsetHeight;let c=0,i=0;for(;c<f.length;){const e=m[c]||s;if(i+e>t){n(8,p=c),n(5,y=i);break}i+=e,c+=1}for(;c<f.length&&(i+=m[c]||s,c+=1,!(i>t+v)););n(9,g=c);const l=f.length-g;for(s=i/g;c<f.length;)m[c++]=s;if(n(6,b=l*s),p<e){await N();let n=0,c=0;for(let t=p;t<e;t+=1)o[t-p]&&(n+=m[t],c+=h||o[t-p].offsetHeight);const i=c-n;r.scrollTo(0,t+i)}},p,g,f,h,l,u,a,function(t){D[t?"unshift":"push"](()=>{c=t,n(3,c)})},function(t){D[t?"unshift":"push"](()=>{r=t,n(2,r)})},function(){v=this.offsetHeight,n(1,v)}]}class ft extends nt{constructor(t){super(),et(this,t,ut,at,c,{items:10,height:0,itemHeight:11,start:8,end:9})}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function ht(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e);if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(n),!0).forEach(function(e){ht(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach(function(e){mt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function bt(t){return function e(){for(var n=this,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return r.length>=t.length?t.apply(this,r):function(){for(var t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return e.apply(n,[].concat(r,o))}}}function wt(t){return{}.toString.call(t).includes("Object")}function $t(t){return"function"==typeof t}var jt=bt(function(t,e){throw new Error(t[e]||t.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),kt={changes:function(t,e){return wt(e)||jt("changeType"),Object.keys(e).some(function(e){return n=t,o=e,!Object.prototype.hasOwnProperty.call(n,o);var n,o})&&jt("changeField"),e},selector:function(t){$t(t)||jt("selectorType")},handler:function(t){$t(t)||wt(t)||jt("handlerType"),wt(t)&&Object.values(t).some(function(t){return!$t(t)})&&jt("handlersType")},initial:function(t){var e;t||jt("initialIsRequired"),wt(t)||jt("initialType"),e=t,Object.keys(e).length||jt("initialContent")}};function xt(t,e){return $t(e)?e(t.current):e}function Ot(t,e){return t.current=yt(yt({},t.current),e),e}function _t(t,e,n){return $t(e)?e(t.current):Object.keys(n).forEach(function(n){var o;return null===(o=e[n])||void 0===o?void 0:o.call(e,t.current[n])}),n}var Ct={create:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};kt.initial(t),kt.handler(e);var n={current:t},o=bt(_t)(n,e),r=bt(Ot)(n),c=bt(kt.changes)(t),i=bt(xt)(n);return[function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t};return kt.selector(t),t(n.current)},function(t){!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight(function(t,e){return e(t)},t)}}(o,r,c,i)(t)}]}};var Pt,St={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},Dt=(Pt=function(t,e){throw new Error(t[e]||t.default)},function t(){for(var e=this,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return o.length>=Pt.length?Pt.apply(this,o):function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t.apply(e,[].concat(o,r))}})(St),Et={config:function(t){var e;return t||Dt("configIsRequired"),e=t,{}.toString.call(e).includes("Object")||Dt("configType"),t.urls?(console.warn(St.deprecation),{paths:{vs:t.urls.monacoBase}}):t}};function Tt(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],Tt(t[n],e[n]))}),gt(gt({},t),e)}var Lt={type:"cancelation",msg:"operation is manually canceled"};function It(t){var e=!1,n=new Promise(function(n,o){t.then(function(t){return e?o(Lt):n(t)}),t.catch(o)});return n.cancel=function(){return e=!0},n}var At,Nt,qt=["monaco"],Mt=Ct.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),Rt=(Nt=2,function(t){if(Array.isArray(t))return t}(At=Mt)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,c,i,l=[],s=!0,a=!1;try{if(c=(n=n.call(t)).next,0===e);else for(;!(s=(o=c.call(n)).done)&&(l.push(o.value),l.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(a)throw r}}return l}}(At,Nt)||function(t,e){if(t){if("string"==typeof t)return dt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(t,e):void 0}}(At,Nt)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),zt=Rt[0],Ht=Rt[1];function Ut(t){return document.body.appendChild(t)}function Bt(t){var e,n,o=zt(function(t){return{config:t.config,reject:t.reject}}),r=(e="".concat(o.config.paths.vs,"/loader.js"),n=document.createElement("script"),e&&(n.src=e),n);return r.onload=function(){return t()},r.onerror=o.reject,r}function Wt(){var t=zt(function(t){return{config:t.config,resolve:t.resolve,reject:t.reject}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(e){var n=e.m||e;Ft(n),t.resolve(n)},function(e){t.reject(e)})}function Ft(t){zt().monaco||Ht({monaco:t})}var Vt=new Promise(function(t,e){return Ht({resolve:t,reject:e})}),Xt={config:function(t){var e=Et.config(t),n=e.monaco,o=function(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(-1!==e.indexOf(o))continue;n[o]=t[o]}return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(o=0;o<c.length;o++)n=c[o],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(e,qt);Ht(function(t){return{config:Tt(t.config,o),monaco:n}})},init:function(){var t=zt(function(t){return{monaco:t.monaco,isInitialized:t.isInitialized,resolve:t.resolve}});if(!t.isInitialized){if(Ht({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),It(Vt);if(window.monaco&&window.monaco.editor)return Ft(window.monaco),t.resolve(window.monaco),It(Vt);!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduceRight(function(t,e){return e(t)},t)}}(Ut,Bt)(Wt)}return It(Vt)},__getMonacoInstance:function(){return zt(function(t){return t.monaco})}};function Jt(e){let n;return{c(){n=f("div"),m(n,"class","monaco-container svelte-1hkxewt")},m(t,o){s(t,n,o),e[7](n)},p:t,i:t,o:t,d(t){t&&a(n),e[7](null)}}}const Yt=Object.fromEntries(Object.entries((void 0)("/node_modules/monaco-themes/themes/*.json")).map(([t,e])=>[t.toLowerCase().split("/").reverse()[0].slice(0,-5).replaceAll(" ","-"),e])),Gt=["vs","vs-dark","hc-black"];function Kt(t,e,n){let o,r;const c=P();let i,{editor:l}=e,{value:s}=e,{theme:a}=e,{options:u={value:s,automaticLayout:!0}}=e;function f(){if(a)if(Yt[a]){const t=a;Yt[a]().then(e=>{r?.editor.defineTheme(t,e),r?.editor.setTheme(t)})}else Gt.includes(a)&&r?.editor.setTheme(a)}return C(async()=>{n(5,r=await Xt.init()),n(1,l=r.editor.create(i,u)),c("ready",l),f(),l.getModel().onDidChangeContent(()=>{l&&n(2,s=l.getValue())})}),function(t){_().$$.on_destroy.push(t)}(()=>l?.dispose()),t.$$set=t=>{"editor"in t&&n(1,l=t.editor),"value"in t&&n(2,s=t.value),"theme"in t&&n(3,a=t.theme),"options"in t&&n(4,u=t.options)},t.$$.update=()=>{if(8&t.$$.dirty&&a&&f(),18&t.$$.dirty&&l?.updateOptions(u),2&t.$$.dirty&&n(6,o=l?.getModel()),112&t.$$.dirty&&o&&u.language&&r.editor.setModelLanguage(o,u.language),6&t.$$.dirty&&l&&l.getValue()!=s){const t=l.getPosition();l.setValue(s),t&&l.setPosition(t)}},[i,l,s,a,u,r,o,function(t){D[t?"unshift":"push"](()=>{i=t,n(0,i)})}]}[...Object.keys(Yt),...Gt].sort((t,e)=>t.localeCompare(e));class Qt extends nt{constructor(t){super(),et(this,t,Kt,Jt,c,{editor:1,value:2,theme:3,options:4})}}function Zt(t){let e,n,r,c,i,u,d,g;return{c(){e=f("div"),n=f("input"),r=h(),c=f("textarea"),i=h(),u=f("button"),u.textContent="Create",m(n,"placeholder","Title"),n.required=!0,m(c,"placeholder","Content"),m(c,"rows","5"),m(c,"class","svelte-segf0u"),m(e,"class","create-form svelte-segf0u")},m(o,a){s(o,e,a),l(e,n),b(n,t[5]),l(e,r),l(e,c),b(c,t[6]),l(e,i),l(e,u),d||(g=[p(n,"input",t[13]),p(c,"input",t[14]),p(u,"click",t[7])],d=!0)},p(t,e){32&e&&n.value!==t[5]&&b(n,t[5]),64&e&&b(c,t[6])},d(t){t&&a(e),d=!1,o(g)}}}function te(t){let e,n,o=t[23].tags.join(", ")+"";return{c(){e=f("span"),n=d(o)},m(t,o){s(t,e,o),l(e,n)},p(t,e){8388608&e&&o!==(o=t[23].tags.join(", ")+"")&&y(n,o)},d(t){t&&a(e)}}}function ee(t){let e,n,r,c,i,u,v,b,w,$,j,k,O,_,C,P,S=t[23].title+"",D=t[23].content.substring(0,100)+"",E=new Date(t[23].created_at).toLocaleDateString()+"",T=t[23].tags.length>0&&te(t);function L(){return t[15](t[23])}function I(){return t[16](t[23])}return{c(){e=f("div"),n=f("div"),r=d(S),c=h(),i=f("div"),u=d(D),v=d("..."),b=h(),w=f("div"),$=f("span"),j=d(E),k=h(),T&&T.c(),O=h(),_=f("button"),_.textContent="Ã—",m(n,"class","scratch-title svelte-segf0u"),m(i,"class","scratch-preview svelte-segf0u"),m(w,"class","scratch-meta svelte-segf0u"),m(_,"class","delete-btn svelte-segf0u"),m(e,"class","scratch-item svelte-segf0u"),x(e,"selected",t[1]&&t[1].id===t[23].id)},m(t,o){s(t,e,o),l(e,n),l(n,r),l(e,c),l(e,i),l(i,u),l(i,v),l(e,b),l(e,w),l(w,$),l($,j),l(w,k),T&&T.m(w,null),l(e,O),l(e,_),C||(P=[p(_,"click",g(L)),p(e,"click",I)],C=!0)},p(n,o){t=n,8388608&o&&S!==(S=t[23].title+"")&&y(r,S),8388608&o&&D!==(D=t[23].content.substring(0,100)+"")&&y(u,D),8388608&o&&E!==(E=new Date(t[23].created_at).toLocaleDateString()+"")&&y(j,E),t[23].tags.length>0?T?T.p(t,o):(T=te(t),T.c(),T.m(w,null)):T&&(T.d(1),T=null),8388610&o&&x(e,"selected",t[1]&&t[1].id===t[23].id)},d(t){t&&a(e),T&&T.d(),C=!1,o(P)}}}function ne(t){let e,n,o,r,c,i,u,p,g,v,b,w,$,j,k,x,O,_,C,P,S,E,T,L,I,A,N,q,R,z=t[1].title+"",H=new Date(t[1].created_at).toLocaleString()+"",U=new Date(t[1].modified_at).toLocaleString()+"",B=(t[1].tags.join(", ")||"None")+"",W=(t[1].source||"None")+"";function F(e){t[17](e)}let V={language:"markdown",theme:"vs-dark",options:{minimap:{enabled:!1},wordWrap:"on",automaticLayout:!0}};return void 0!==t[3]&&(V.value=t[3]),i=new Qt({props:V}),D.push(()=>K(i,"value",F)),i.$on("change",t[9]),{c(){e=f("div"),n=f("div"),o=f("h3"),r=d(z),c=h(),Q(i.$$.fragment),p=h(),g=f("div"),v=f("div"),b=f("strong"),b.textContent="Created:",w=h(),$=d(H),j=h(),k=f("div"),x=f("strong"),x.textContent="Modified:",O=h(),_=d(U),C=h(),P=f("div"),S=f("strong"),S.textContent="Tags:",E=h(),T=d(B),L=h(),I=f("div"),A=f("strong"),A.textContent="Source:",N=h(),q=d(W),m(n,"class","editor-header svelte-segf0u"),m(v,"class","svelte-segf0u"),m(k,"class","svelte-segf0u"),m(P,"class","svelte-segf0u"),m(I,"class","svelte-segf0u"),m(g,"class","metadata-panel svelte-segf0u"),m(e,"class","editor-panel svelte-segf0u")},m(t,a){s(t,e,a),l(e,n),l(n,o),l(o,r),l(e,c),Z(i,e,null),l(e,p),l(e,g),l(g,v),l(v,b),l(v,w),l(v,$),l(g,j),l(g,k),l(k,x),l(k,O),l(k,_),l(g,C),l(g,P),l(P,S),l(P,E),l(P,T),l(g,L),l(g,I),l(I,A),l(I,N),l(I,q),R=!0},p(t,e){(!R||2&e)&&z!==(z=t[1].title+"")&&y(r,z);const n={};!u&&8&e&&(u=!0,n.value=t[3],M(()=>u=!1)),i.$set(n),(!R||2&e)&&H!==(H=new Date(t[1].created_at).toLocaleString()+"")&&y($,H),(!R||2&e)&&U!==(U=new Date(t[1].modified_at).toLocaleString()+"")&&y(_,U),(!R||2&e)&&B!==(B=(t[1].tags.join(", ")||"None")+"")&&y(T,B),(!R||2&e)&&W!==(W=(t[1].source||"None")+"")&&y(q,W)},i(t){R||(X(i.$$.fragment,t),R=!0)},o(t){J(i.$$.fragment,t),R=!1},d(t){t&&a(e),tt(i)}}}function oe(t){let e,n,r,c,i,u,g,v,w,$,j,k,x,O,_,C,P,S,D,E,T=t[4]?"Cancel":"New Scratch",L=t[2].length+"",I=t[4]&&Zt(t);C=new ft({props:{items:t[2],height:"400px",$$slots:{default:[ee,({item:t})=>({23:t}),({item:t})=>t?8388608:0]},$$scope:{ctx:t}}});let A=t[1]&&ne(t);return{c(){e=f("div"),n=f("div"),r=f("input"),c=h(),i=f("button"),u=d(T),g=h(),I&&I.c(),v=h(),w=f("div"),$=f("div"),j=f("h3"),k=d("Scratches ("),x=d(L),O=d(")"),_=h(),Q(C.$$.fragment),P=h(),A&&A.c(),m(r,"placeholder","Search scratches..."),m(r,"class","search-input svelte-segf0u"),m(i,"class","create-btn svelte-segf0u"),m(n,"class","toolbar svelte-segf0u"),m($,"class","list-panel svelte-segf0u"),m(w,"class","main-content svelte-segf0u"),m(e,"class","scratches-view svelte-segf0u")},m(o,a){s(o,e,a),l(e,n),l(n,r),b(r,t[0]),l(n,c),l(n,i),l(i,u),l(e,g),I&&I.m(e,null),l(e,v),l(e,w),l(w,$),l($,j),l(j,k),l(j,x),l(j,O),l($,_),Z(C,$,null),l(w,P),A&&A.m(w,null),S=!0,D||(E=[p(r,"input",t[11]),p(i,"click",t[12])],D=!0)},p(t,[n]){1&n&&r.value!==t[0]&&b(r,t[0]),(!S||16&n)&&T!==(T=t[4]?"Cancel":"New Scratch")&&y(u,T),t[4]?I?I.p(t,n):(I=Zt(t),I.c(),I.m(e,v)):I&&(I.d(1),I=null),(!S||4&n)&&L!==(L=t[2].length+"")&&y(x,L);const o={};4&n&&(o.items=t[2]),25165826&n&&(o.$$scope={dirty:n,ctx:t}),C.$set(o),t[1]?A?(A.p(t,n),2&n&&X(A,1)):(A=ne(t),A.c(),X(A,1),A.m(w,null)):A&&(F(),J(A,1,1,()=>{A=null}),V())},i(t){S||(X(C.$$.fragment,t),X(A),S=!0)},o(t){J(C.$$.fragment,t),J(A),S=!1},d(t){t&&a(e),I&&I.d(),tt(C),A&&A.d(),D=!1,o(E)}}}function re(t,e,n){let o,r=[],c=null,i="",l=[],s="",a=!1,u="",f="";function d(t){n(1,c=t),n(3,s=t.content)}async function h(){if(c)try{const t=await rt("update_scratch",{id:c.id,content:s});r=r.map(e=>e.id===t.id?t:e),n(1,c=t)}catch(t){console.error("Error updating scratch:",t)}}async function p(t){if(confirm(`Delete "${t.title}"?`))try{await rt("delete_scratch",{id:t.id}),r=r.filter(e=>e.id!==t.id),c&&c.id===t.id&&(n(1,c=null),n(3,s=""))}catch(t){console.error("Error deleting scratch:",t)}}C(async()=>{await async function(){try{r=await rt("list_scratches"),n(2,l=r)}catch(t){console.error("Error loading scratches:",t)}}()});return t.$$.update=()=>{1&t.$$.dirty&&void 0!==i&&function(){if(i){const t=i.toLowerCase();n(2,l=r.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t))))}else n(2,l=r)}()},[i,c,l,s,a,u,f,async function(){if(u.trim())try{const t=await rt("create_scratch",{title:u,content:f,tags:[],source:null});r=[...r,t],n(5,u=""),n(6,f=""),n(4,a=!1)}catch(t){console.error("Error creating scratch:",t)}},d,function(t){n(3,s=t.detail.value),clearTimeout(o),o=setTimeout(h,1e3)},p,function(){i=this.value,n(0,i)},()=>n(4,a=!a),function(){u=this.value,n(5,u)},function(){f=this.value,n(6,f)},t=>p(t),t=>d(t),function(t){s=t,n(3,s)}]}class ce extends nt{constructor(t){super(),et(this,t,re,oe,c,{})}}function ie(t,e,n){const o=t.slice();return o[18]=e[n],o}function le(t,e,n){const o=t.slice();return o[21]=e[n],o}function se(t){let e,n,o,r,c=t[2]?"â–¼":"â–¶";return{c(){e=f("button"),n=d(c),m(e,"class","expand-btn svelte-1d8f1s5")},m(c,i){s(c,e,i),l(e,n),o||(r=p(e,"click",t[6]),o=!0)},p(t,e){4&e&&c!==(c=t[2]?"â–¼":"â–¶")&&y(n,c)},d(t){t&&a(e),o=!1,r()}}}function ae(t){let e,n,r,c,i,u,g,v,b,w,$=t[0].title+"";return{c(){e=f("span"),n=d($),r=h(),c=f("button"),c.textContent="+",i=h(),u=f("button"),u.textContent="âœŽ",g=h(),v=f("button"),v.textContent="ðŸ—‘",m(e,"class","node-title svelte-1d8f1s5"),m(c,"class","action-btn svelte-1d8f1s5"),m(u,"class","action-btn svelte-1d8f1s5"),m(v,"class","action-btn delete-btn svelte-1d8f1s5")},m(o,a){s(o,e,a),l(e,n),s(o,r,a),s(o,c,a),s(o,i,a),s(o,u,a),s(o,g,a),s(o,v,a),b||(w=[p(c,"click",t[7]),p(u,"click",t[8]),p(v,"click",t[11])],b=!0)},p(t,e){1&e&&$!==($=t[0].title+"")&&y(n,$)},d(t){t&&(a(e),a(r),a(c),a(i),a(u),a(g),a(v)),b=!1,o(w)}}}function ue(t){let e,n,r,c,i,l,u;return{c(){e=f("input"),n=h(),r=f("button"),r.textContent="âœ“",c=h(),i=f("button"),i.textContent="âœ—",m(e,"class","edit-title svelte-1d8f1s5"),m(r,"class","action-btn svelte-1d8f1s5"),m(i,"class","action-btn svelte-1d8f1s5")},m(o,a){s(o,e,a),b(e,t[4]),s(o,n,a),s(o,r,a),s(o,c,a),s(o,i,a),l||(u=[p(e,"input",t[14]),p(r,"click",t[9]),p(i,"click",t[10])],l=!0)},p(t,n){16&n&&e.value!==t[4]&&b(e,t[4])},d(t){t&&(a(e),a(n),a(r),a(c),a(i)),l=!1,o(u)}}}function fe(t){let e,n,o=t[0].content+"";return{c(){e=f("div"),n=d(o),m(e,"class","node-content svelte-1d8f1s5")},m(t,o){s(t,e,o),l(e,n)},p(t,e){1&e&&o!==(o=t[0].content+"")&&y(n,o)},d(t){t&&a(e)}}}function de(t){let e,n,o;return{c(){e=f("textarea"),m(e,"class","edit-content svelte-1d8f1s5"),m(e,"placeholder","Node content...")},m(r,c){s(r,e,c),b(e,t[5]),n||(o=p(e,"input",t[15]),n=!0)},p(t,n){32&n&&b(e,t[5])},d(t){t&&a(e),n=!1,o()}}}function he(t){let e,n=Y(t[0].scratches),o=[];for(let e=0;e<n.length;e+=1)o[e]=pe(le(t,n,e));return{c(){e=f("div");for(let t=0;t<o.length;t+=1)o[t].c();m(e,"class","node-scratches svelte-1d8f1s5")},m(t,n){s(t,e,n);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null)},p(t,r){if(4097&r){let c;for(n=Y(t[0].scratches),c=0;c<n.length;c+=1){const i=le(t,n,c);o[c]?o[c].p(i,r):(o[c]=pe(i),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}},d(t){t&&a(e),u(o,t)}}}function pe(t){let e,n,o,r,c,i,u,g,v,b,w=t[21].mode+"",$=t[21].scratch_id+"";function j(){return t[16](t[21])}return{c(){e=f("div"),n=f("span"),o=d(w),r=d(": "),c=d($),i=h(),u=f("button"),u.textContent="Ã—",g=h(),m(u,"class","remove-scratch-btn svelte-1d8f1s5"),m(e,"class","scratch-link svelte-1d8f1s5")},m(t,a){s(t,e,a),l(e,n),l(n,o),l(n,r),l(n,c),l(e,i),l(e,u),l(e,g),v||(b=p(u,"click",j),v=!0)},p(e,n){t=e,1&n&&w!==(w=t[21].mode+"")&&y(o,w),1&n&&$!==($=t[21].scratch_id+"")&&y(c,$)},d(t){t&&a(e),v=!1,b()}}}function ge(t){let e,n,o=Y(t[0].children),r=[];for(let e=0;e<o.length;e+=1)r[e]=me(ie(t,o,e));const c=t=>J(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=d("")},m(t,o){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,o);s(t,e,o),n=!0},p(t,n){if(3&n){let i;for(o=Y(t[0].children),i=0;i<o.length;i+=1){const c=ie(t,o,i);r[i]?(r[i].p(c,n),X(r[i],1)):(r[i]=me(c),r[i].c(),X(r[i],1),r[i].m(e.parentNode,e))}for(F(),i=o.length;i<r.length;i+=1)c(i);V()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)X(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)J(r[t]);n=!1},d(t){t&&a(e),u(r,t)}}}function me(t){let e,n;return e=new we({props:{node:t[18],level:t[1]+1}}),{c(){Q(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.node=t[18]),2&n&&(o.level=t[1]+1),e.$set(o)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function ve(t){let e,n,r,c,i,u,d,g,v,y=t[0].children.length>0&&se(t);function b(t,e){return t[3]?ue:ae}let $=b(t),j=$(t);function k(t,e){return t[3]?de:t[0].content?fe:void 0}let x=k(t),O=x&&x(t),_=t[0].scratches.length>0&&he(t),C=t[2]&&ge(t);return{c(){e=f("div"),n=f("div"),y&&y.c(),r=h(),j.c(),c=h(),O&&O.c(),i=h(),_&&_.c(),u=h(),C&&C.c(),m(n,"class","node-header svelte-1d8f1s5"),m(e,"class","outline-node svelte-1d8f1s5"),w(e,"margin-left",20*t[1]+"px")},m(o,a){s(o,e,a),l(e,n),y&&y.m(n,null),l(n,r),j.m(n,null),l(e,c),O&&O.m(e,null),l(e,i),_&&_.m(e,null),l(e,u),C&&C.m(e,null),d=!0,g||(v=[p(e,"dragover",ye),p(e,"drop",t[13])],g=!0)},p(t,[o]){t[0].children.length>0?y?y.p(t,o):(y=se(t),y.c(),y.m(n,r)):y&&(y.d(1),y=null),$===($=b(t))&&j?j.p(t,o):(j.d(1),j=$(t),j&&(j.c(),j.m(n,null))),x===(x=k(t))&&O?O.p(t,o):(O&&O.d(1),O=x&&x(t),O&&(O.c(),O.m(e,i))),t[0].scratches.length>0?_?_.p(t,o):(_=he(t),_.c(),_.m(e,u)):_&&(_.d(1),_=null),t[2]?C?(C.p(t,o),4&o&&X(C,1)):(C=ge(t),C.c(),X(C,1),C.m(e,null)):C&&(F(),J(C,1,1,()=>{C=null}),V()),(!d||2&o)&&w(e,"margin-left",20*t[1]+"px")},i(t){d||(X(C),d=!0)},o(t){J(C),d=!1},d(t){t&&a(e),y&&y.d(),j.d(),O&&O.d(),_&&_.d(),C&&C.d(),g=!1,o(v)}}}function ye(t){t.preventDefault()}function be(t,e,n){let{node:o}=e,{level:r=0}=e;const c=P();let i=!0,l=!1,s=o.title,a=o.content||"";function u(t){n(0,o.scratches=o.scratches.filter(e=>e.scratch_id!==t),o),c("nodeUpdated",o)}return t.$$set=t=>{"node"in t&&n(0,o=t.node),"level"in t&&n(1,r=t.level)},[o,r,i,l,s,a,function(){n(2,i=!i)},function(){c("addChild",o.id)},function(){n(3,l=!0),n(4,s=o.title),n(5,a=o.content||"")},function(){n(0,o.title=s,o),n(0,o.content=a||null,o),n(3,l=!1),c("nodeUpdated",o)},function(){n(3,l=!1)},function(){c("deleteNode",o.id)},u,function(t){t.preventDefault();const e=t.dataTransfer.getData("application/json");c("dropScratch",{nodeId:o.id,scratchData:e})},function(){s=this.value,n(4,s)},function(){a=this.value,n(5,a)},t=>u(t.scratch_id)]}class we extends nt{constructor(t){super(),et(this,t,be,ve,c,{node:0,level:1})}}function $e(t,e,n){const o=t.slice();return o[29]=e[n],o}function je(t,e,n){const o=t.slice();return o[32]=e[n],o}function ke(t){let e,n,r,c,i,u,d,g,v,y;return{c(){e=f("div"),n=f("input"),r=h(),c=f("input"),i=h(),u=f("input"),d=h(),g=f("button"),g.textContent="Create",m(n,"placeholder","Project Title"),n.required=!0,m(c,"placeholder","Template ID"),m(u,"placeholder","Output Directory"),m(e,"class","create-form svelte-1ukjm5d")},m(o,a){s(o,e,a),l(e,n),b(n,t[4]),l(e,r),l(e,c),b(c,t[5]),l(e,i),l(e,u),b(u,t[6]),l(e,d),l(e,g),v||(y=[p(n,"input",t[16]),p(c,"input",t[17]),p(u,"input",t[18]),p(g,"click",t[9])],v=!0)},p(t,e){16&e[0]&&n.value!==t[4]&&b(n,t[4]),32&e[0]&&c.value!==t[5]&&b(c,t[5]),64&e[0]&&u.value!==t[6]&&b(u,t[6])},d(t){t&&a(e),v=!1,o(y)}}}function xe(t){let e,n,o,r,c,i,u,g,v,b,w=t[32].title+"",$=new Date(t[32].created_at).toLocaleDateString()+"";function j(){return t[19](t[32])}return{c(){e=f("div"),n=f("h3"),o=d(w),r=h(),c=f("p"),i=d("Created: "),u=d($),g=h(),m(e,"class","project-item svelte-1ukjm5d"),x(e,"selected",t[2]&&t[2].id===t[32].id)},m(t,a){s(t,e,a),l(e,n),l(n,o),l(e,r),l(e,c),l(c,i),l(c,u),l(e,g),v||(b=p(e,"click",j),v=!0)},p(n,r){t=n,2&r[0]&&w!==(w=t[32].title+"")&&y(o,w),2&r[0]&&$!==($=new Date(t[32].created_at).toLocaleDateString()+"")&&y(u,$),6&r[0]&&x(e,"selected",t[2]&&t[2].id===t[32].id)},d(t){t&&a(e),v=!1,b()}}}function Oe(t){let e,n,o,r,c,i,g,v,w,$,j,k,x,O,_,C,P,S,E,T,L,I,A,N,q,R=t[2].title+"";w=new we({props:{node:t[2].outline,level:0}}),w.$on("addChild",t[11]),w.$on("dropScratch",t[12]),w.$on("nodeUpdated",t[13]),w.$on("deleteNode",t[14]);let z=Y(t[7]),H=[];for(let e=0;e<z.length;e+=1)H[e]=_e($e(t,z,e));function U(e){t[22](e)}let B={language:"markdown",theme:"vs-dark",options:{readOnly:!1,minimap:{enabled:!1},wordWrap:"on",automaticLayout:!0}};return void 0!==t[8]&&(B.value=t[8]),L=new Qt({props:B}),D.push(()=>K(L,"value",U)),{c(){e=f("div"),n=f("h3"),o=d(R),r=h(),c=f("div"),i=f("div"),g=f("h4"),g.textContent="Outline",v=h(),Q(w.$$.fragment),$=h(),j=f("div"),k=f("h4"),k.textContent="Scratches",x=h(),O=f("input"),_=h(),C=f("div");for(let t=0;t<H.length;t+=1)H[t].c();P=h(),S=f("div"),E=f("h4"),E.textContent="Document",T=h(),Q(L.$$.fragment),m(i,"class","outline-panel svelte-1ukjm5d"),m(O,"placeholder","Search scratches..."),m(O,"class","search-input svelte-1ukjm5d"),m(C,"class","scratches-list svelte-1ukjm5d"),m(j,"class","scratches-panel svelte-1ukjm5d"),m(S,"class","document-panel svelte-1ukjm5d"),m(c,"class","project-content svelte-1ukjm5d"),m(e,"class","project-detail svelte-1ukjm5d")},m(a,u){s(a,e,u),l(e,n),l(n,o),l(e,r),l(e,c),l(c,i),l(i,g),l(i,v),Z(w,i,null),l(c,$),l(c,j),l(j,k),l(j,x),l(j,O),b(O,t[0]),l(j,_),l(j,C);for(let t=0;t<H.length;t+=1)H[t]&&H[t].m(C,null);l(c,P),l(c,S),l(S,E),l(S,T),Z(L,S,null),A=!0,N||(q=p(O,"input",t[20]),N=!0)},p(t,e){(!A||4&e[0])&&R!==(R=t[2].title+"")&&y(o,R);const n={};if(4&e[0]&&(n.node=t[2].outline),w.$set(n),1&e[0]&&O.value!==t[0]&&b(O,t[0]),128&e[0]){let n;for(z=Y(t[7]),n=0;n<z.length;n+=1){const o=$e(t,z,n);H[n]?H[n].p(o,e):(H[n]=_e(o),H[n].c(),H[n].m(C,null))}for(;n<H.length;n+=1)H[n].d(1);H.length=z.length}const r={};!I&&256&e[0]&&(I=!0,r.value=t[8],M(()=>I=!1)),L.$set(r)},i(t){A||(X(w.$$.fragment,t),X(L.$$.fragment,t),A=!0)},o(t){J(w.$$.fragment,t),J(L.$$.fragment,t),A=!1},d(t){t&&a(e),tt(w),u(H,t),tt(L),N=!1,q()}}}function _e(t){let e,n,o,r,c,i,u,g,v,b,w=t[29].title+"",$=t[29].content.substring(0,50)+"";function j(...e){return t[21](t[29],...e)}return{c(){e=f("div"),n=f("div"),o=d(w),r=h(),c=f("div"),i=d($),u=d("..."),g=h(),m(n,"class","scratch-title svelte-1ukjm5d"),m(c,"class","scratch-preview svelte-1ukjm5d"),m(e,"class","scratch-item svelte-1ukjm5d"),m(e,"draggable","true")},m(t,a){s(t,e,a),l(e,n),l(n,o),l(e,r),l(e,c),l(c,i),l(c,u),l(e,g),v||(b=p(e,"dragstart",j),v=!0)},p(e,n){t=e,128&n[0]&&w!==(w=t[29].title+"")&&y(o,w),128&n[0]&&$!==($=t[29].content.substring(0,50)+"")&&y(i,$)},d(t){t&&a(e),v=!1,b()}}}function Ce(t){let e,n,o,r,c,i,g,v,b,w,$,j,k,x=t[3]?"Cancel":"New Project",O=t[3]&&ke(t),_=Y(t[1]),C=[];for(let e=0;e<_.length;e+=1)C[e]=xe(je(t,_,e));let P=t[2]&&Oe(t);return{c(){e=f("div"),n=f("div"),o=f("h2"),o.textContent="Projects",r=h(),c=f("button"),i=d(x),g=h(),O&&O.c(),v=h(),b=f("div");for(let t=0;t<C.length;t+=1)C[t].c();w=h(),P&&P.c(),m(c,"class","create-btn svelte-1ukjm5d"),m(n,"class","toolbar svelte-1ukjm5d"),m(b,"class","projects-list svelte-1ukjm5d"),m(e,"class","projects-view svelte-1ukjm5d")},m(a,u){s(a,e,u),l(e,n),l(n,o),l(n,r),l(n,c),l(c,i),l(e,g),O&&O.m(e,null),l(e,v),l(e,b);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(b,null);l(e,w),P&&P.m(e,null),$=!0,j||(k=p(c,"click",t[15]),j=!0)},p(t,n){if((!$||8&n[0])&&x!==(x=t[3]?"Cancel":"New Project")&&y(i,x),t[3]?O?O.p(t,n):(O=ke(t),O.c(),O.m(e,v)):O&&(O.d(1),O=null),1030&n[0]){let e;for(_=Y(t[1]),e=0;e<_.length;e+=1){const o=je(t,_,e);C[e]?C[e].p(o,n):(C[e]=xe(o),C[e].c(),C[e].m(b,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=_.length}t[2]?P?(P.p(t,n),4&n[0]&&X(P,1)):(P=Oe(t),P.c(),X(P,1),P.m(e,null)):P&&(F(),J(P,1,1,()=>{P=null}),V())},i(t){$||(X(P),$=!0)},o(t){J(P),$=!1},d(t){t&&a(e),O&&O.d(),u(C,t),P&&P.d(),j=!1,k()}}}function Pe(t,e,n){let o=[],r=null,c=!1,i="",l="default",s="./output",a=[],u="",f=[],d="";function h(){if(u){const t=u.toLowerCase();n(7,f=a.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t))))}else n(7,f=a)}function p(t){n(2,r=t),g()}function g(){r&&n(8,d=function t(e,n=0){let o=`${"#".repeat(n+1)} ${e.title}\n\n`;e.content&&(o+=`${e.content}\n\n`);for(let t of e.scratches)if("Include"===t.mode){const e=a.find(e=>e.id===t.scratch_id);o+=e?`${e.content}\n\n`:`**Scratch ${t.scratch_id} not found**\n\n`}for(let r of e.children)o+=t(r,n+1);return o}(r.outline))}async function m(){try{await rt("save_project",{projectDto:r})}catch(t){console.error("Error saving project:",t)}}C(async()=>{await async function(){try{n(1,o=await rt("list_projects"))}catch(t){console.error("Error loading projects:",t)}}(),await async function(){try{a=await rt("list_scratches"),h()}catch(t){console.error("Error loading scratches:",t)}}()});return t.$$.update=()=>{1&t.$$.dirty[0]&&void 0!==u&&h()},[u,o,r,c,i,l,s,f,d,async function(){if(i.trim())try{const t=await rt("create_project",{title:i,template_id:l,output_dir:s});n(1,o=[...o,t]),n(4,i=""),n(3,c=!1)}catch(t){console.error("Error creating project:",t)}},p,function(t){!function e(n){if(n.id===t){const t={id:crypto.randomUUID(),title:"New Section",content:null,children:[],scratches:[]};return n.children=[...n.children,t],!0}for(let t of n.children)if(e(t))return!0;return!1}(r.outline),n(2,r={...r}),g(),m()},function(t){const e=t.detail.nodeId,o=JSON.parse(t.detail.scratchData);!function t(n){if(n.id===e){const t={scratch_id:o.id,mode:"Include",insertion:{body:!0,footnote:!1,reference:!1,appendix:!1}};return n.scratches=[...n.scratches,t],!0}for(let e of n.children)if(t(e))return!0;return!1}(r.outline),n(2,r={...r}),g(),m()},function(t){n(2,r={...r}),g(),m()},function(t){const e=t.detail;!function t(n){const o=n.children.findIndex(t=>t.id===e);if(-1!==o)return n.children.splice(o,1),!0;for(let e of n.children)if(t(e))return!0;return!1}(r.outline),n(2,r={...r}),g(),m()},()=>n(3,c=!c),function(){i=this.value,n(4,i)},function(){l=this.value,n(5,l)},function(){s=this.value,n(6,s)},t=>p(t),function(){u=this.value,n(0,u)},(t,e)=>function(t,e){t.dataTransfer.setData("application/json",JSON.stringify(e))}(e,t),function(t){d=t,n(8,d)}]}class Se extends nt{constructor(t){super(),et(this,t,Pe,Ce,c,{},null,[-1,-1])}}function De(e){let n,o,r;return{c(){n=f("h1"),n.textContent="LaTeX",o=h(),r=f("p"),r.textContent="LaTeX view"},m(t,e){s(t,n,e),s(t,o,e),s(t,r,e)},i:t,o:t,d(t){t&&(a(n),a(o),a(r))}}}function Ee(t){let e,n;return e=new Se({}),{c(){Q(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function Te(t){let e,n;return e=new ce({}),{c(){Q(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function Le(t){let e,n,r,c,i,u,d,g,v,y,b,w,$,j,k;const x=[Te,Ee,De],O=[];function _(t,e){return"scratches"===t[0]?0:"projects"===t[0]?1:"latex"===t[0]?2:-1}return~(b=_(t))&&(w=O[b]=x[b](t)),{c(){e=f("main"),n=f("aside"),r=f("nav"),c=f("button"),c.textContent="Scratches",i=h(),u=f("button"),u.textContent="Projects",d=h(),g=f("button"),g.textContent="LaTeX",v=h(),y=f("section"),w&&w.c(),m(c,"class","svelte-wljs6r"),m(u,"class","svelte-wljs6r"),m(g,"class","svelte-wljs6r"),m(r,"class","svelte-wljs6r"),m(n,"class","svelte-wljs6r"),m(y,"class","svelte-wljs6r"),m(e,"class","svelte-wljs6r")},m(o,a){s(o,e,a),l(e,n),l(n,r),l(r,c),l(r,i),l(r,u),l(r,d),l(r,g),l(e,v),l(e,y),~b&&O[b].m(y,null),$=!0,j||(k=[p(c,"click",t[2]),p(u,"click",t[3]),p(g,"click",t[4])],j=!0)},p(t,[e]){let n=b;b=_(t),b!==n&&(w&&(F(),J(O[n],1,1,()=>{O[n]=null}),V()),~b?(w=O[b],w||(w=O[b]=x[b](t),w.c()),X(w,1),w.m(y,null)):w=null)},i(t){$||(X(w),$=!0)},o(t){J(w),$=!1},d(t){t&&a(e),~b&&O[b].d(),j=!1,o(k)}}}function Ie(t,e,n){let o="scratches";function r(t){n(0,o=t)}return[o,r,()=>r("scratches"),()=>r("projects"),()=>r("latex")]}return new class extends nt{constructor(t){super(),et(this,t,Ie,Le,c,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
